<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hedef Promosyon Eğitimi - Modüler Sistem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a1f44; /* Koyu lacivert */
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #142d5f; /* Konteyner için biraz daha açık lacivert */
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: #0a1f44; /* Header için koyu lacivert */
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #0a1f44; /* Navigasyon sekmeleri için koyu lacivert */
            border-bottom: 1px solid #0056b3;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            background: #0a1f44;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff; /* Beyaz metin */
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: #ffc107; /* Aktif sekme için sarı */
            color: #0a1f44; /* Aktif sekme metni için koyu lacivert */
            border-bottom: 3px solid #ffc107;
        }

        .nav-tab:hover {
            background: #1a3a6b; /* Hover için biraz daha açık lacivert */
            color: #ffc107;
        }

        .content {
            padding: 30px;
            display: flex;
            gap: 20px;
        }

        .main-content {
            flex: 1;
        }

        .sidebar {
            width: 350px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .accordion {
            margin: 15px 0;
        }

        .accordion-header {
            background: #1a3a6b; /* Akordiyon başlıkları için lacivert */
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 10px;
            position: relative;
        }

        .edit-button {
            background: #ffc107 !important; /* Sarı edit butonu */
            color: #0a1f44 !important;
            border: none !important;
            padding: 5px 10px !important;
            border-radius: 5px !important;
            margin-left: 10px !important;
            font-size: 12px !important;
            cursor: pointer !important;
            z-index: 10;
            position: relative;
        }

        .edit-button:hover {
            background: #ffeb3b !important; /* Açık sarı hover */
            transform: scale(1.05);
        }

        .accordion-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .accordion-header.active {
            border-radius: 15px 15px 0 0;
        }

        .accordion-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 15px 15px;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .accordion-content.active {
            max-height: none;
            padding: 20px;
            overflow: visible;
        }

        .promo-card {
            background: #1a3a6b; /* Promosyon kartı için lacivert */
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .promo-card:hover {
            transform: translateY(-5px);
        }

        .promo-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .promo-description {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .promo-features {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .section-accordion {
            margin-bottom: 15px;
            background: #1a3a6b;
            border-radius: 8px;
            overflow: hidden;
        }

        .section-header {
            background: #1a3a6b; /* Bölüm başlıkları için lacivert */
            color: white;
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .section-header:hover {
            background: #0a1f44; /* Hover için daha koyu lacivert */
        }

        .section-header.active {
            background: rgba(255,255,255,0.2);
        }

        .section-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .section-header.active .section-icon {
            transform: rotate(180deg);
        }

        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.active {
            max-height: 500px;
        }

        .section-content ul {
            list-style: none;
            padding: 15px;
            margin: 0;
        }

        .section-content li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            font-size: 0.95rem;
            line-height: 1.4;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .section-content li:last-child {
            border-bottom: none;
        }

        .section-content li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #4CAF50;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .section-content strong {
            color: #FFD700;
            font-weight: bold;
        }

        .quiz-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .quiz-question {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #dee2e6;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .quiz-option.selected {
            border-color: #ffc107;
            background: #ffc107;
            color: #0a1f44;
        }

        .quiz-option.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .quiz-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .quiz-button {
            background: #ffc107; /* Sarı quiz butonu */
            color: #0a1f44;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .quiz-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            background: #ffeb3b; /* Açık sarı hover */
        }

        .quiz-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .score-display {
            background: #1a3a6b;
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 1.1rem;
            margin-bottom: 20px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-box:focus {
            border-color: #667eea;
        }

        .add-promo-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .add-promo-section h3 {
            margin-bottom: 15px;
            color: #0a1f44; /* Koyu lacivert başlık */
            text-align: center;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #0a1f44; /* Koyu lacivert label */
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .add-button {
            width: 100%;
            background: #ffc107; /* Sarı ekleme butonu */
            color: #0a1f44;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            background: #ffeb3b; /* Açık sarı hover */
        }

        .promo-manager {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .promo-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .promo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f8f9fa;
        }

        .promo-item.active {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .promo-controls {
            display: flex;
            gap: 5px;
        }

        .control-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .edit-btn {
            background: #ff9800;
            color: white;
        }

        .delete-btn {
            background: #f44336;
            color: white;
        }

        .toggle-btn {
            background: #4caf50;
            color: white;
        }

        .edit-mode {
            background: #fff3cd !important;
            border: 2px solid #ffc107 !important;
        }

        .edit-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ffc107;
            border-radius: 8px;
            background: white;
            font-size: 16px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 8px 0;
            color: #333;
            font-weight: 500;
        }

        .edit-input:focus {
            outline: none;
            border-color: #ff9800;
            box-shadow: 0 0 5px rgba(255, 152, 0, 0.3);
        }

        .edit-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ffc107;
            border-radius: 8px;
            background: white;
            font-size: 16px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 8px 0;
            min-height: 80px;
            resize: vertical;
            color: #333;
            font-weight: 500;
            line-height: 1.5;
        }

        .edit-textarea:focus {
            outline: none;
            border-color: #ff9800;
            box-shadow: 0 0 5px rgba(255, 152, 0, 0.3);
        }

        .edit-section-content {
            background: rgba(255,255,255,0.95);
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .edit-section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #ffc107;
        }

        .edit-list-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }

        .edit-list-item input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            margin-right: 10px;
        }

        .edit-list-item button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .add-item-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 0;
        }

        .edit-buttons {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        .save-btn {
            background: #ffc107;
            color: #0a1f44;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .cancel-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .json-editor {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            min-height: 200px;
            white-space: pre-wrap;
            color: #333;
        }

        .json-editor:focus {
            outline: none;
            border-color: #667eea;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .content {
                padding: 20px;
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: static;
                margin-bottom: 20px;
            }
            
            .main-content {
                width: 100%;
            }
            
            .promo-card {
                padding: 15px;
            }
            
            .accordion-header {
                padding: 12px;
                font-size: 1rem;
            }
            
            .accordion-content.active {
                padding: 15px;
            }
            
            .promo-features {
                max-height: 70vh;
                padding: 12px;
            }
            
            .promo-features h4 {
                font-size: 1.1rem;
            }
            
            .promo-features li {
                font-size: 0.9rem;
                padding: 6px 0;
                padding-left: 20px;
            }
            
            .section-header {
                padding: 10px 12px;
                font-size: 1rem;
            }
            
            .section-content {
                max-height: 300px;
            }
            
            .section-content ul {
                padding: 12px;
            }
        }

        /* Modal Stilleri */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #142d5f; /* Konteyner için biraz daha açık lacivert */
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            color: white;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.4);
        }

        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 30px;
            font-weight: bold;
            color: #ffc107;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close-button:hover {
            color: #ffeb3b;
        }

        .modal-content h3 {
            color: #ffc107;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
        }

        .modal-content h4 {
            color: #ffc107;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 5px;
        }

        .modal-content ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 20px;
        }

        .modal-content li {
            margin-bottom: 8px;
            line-height: 1.5;
            padding-left: 20px;
            position: relative;
        }

        .modal-content li strong {
            color: #ffeb3b;
        }

        .modal-content ul li::before {
            content: '•';
            color: #ffc107;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .modal-content ol {
            list-style-type: decimal;
            padding-left: 25px;
            margin-top: 5px;
            margin-bottom: 10px;
        }

        .modal-content ol li {
            margin-bottom: 5px;
            padding-left: 0;
        }

        /* Chatbot UI styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background-color: #142d5f; /* Konteyner için biraz daha açık lacivert */
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .chatbot-header {
            background-color: #0a1f44; /* Koyu lacivert */
            color: #ffc107; /* Sarı */
            padding: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            border-bottom: 1px solid #ffc107;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header:hover {
            background-color: #1a3a6b;
        }

        .chatbot-close-btn {
            background: none;
            border: none;
            color: #ffc107;
            font-size: 1.5rem;
            cursor: pointer;
            font-weight: bold;
        }

        .chatbot-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #1a3a6b; /* Mesaj alanı için lacivert */
            color: white;
            scroll-behavior: smooth;
        }

        .chatbot-message {
            margin-bottom: 10px;
            display: flex;
        }

        .chatbot-message.user {
            justify-content: flex-end;
        }

        .chatbot-message.bot {
            justify-content: flex-start;
        }

        .chatbot-message-bubble {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .chatbot-message.user .chatbot-message-bubble {
            background-color: #ffc107; /* Sarı */
            color: #0a1f44; /* Koyu lacivert */
            border-bottom-right-radius: 2px;
        }

        .chatbot-message.bot .chatbot-message-bubble {
            background-color: #0a1f44; /* Koyu lacivert */
            color: white;
            border-bottom-left-radius: 2px;
        }

        .chatbot-input-container {
            display: flex;
            padding: 10px;
            border-top: 1px solid rgba(255,255,255,0.1);
            background-color: #0a1f44; /* Koyu lacivert */
        }

        .chatbot-input {
            flex-grow: 1;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #ffc107;
            background-color: #1a3a6b; /* Input arka planı */
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .chatbot-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .chatbot-send-btn {
            background-color: #ffc107; /* Sarı gönder butonu */
            color: #0a1f44; /* Koyu lacivert */
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .chatbot-send-btn:hover {
            background-color: #ffeb3b;
        }

        /* Floating Chat Icon */
        .chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ffc107; /* Sarı */
            color: #0a1f44; /* Koyu lacivert */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            transition: transform 0.3s ease;
        }

        .chat-icon:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Hedef Promosyon Eğitimi</h1>
            <p>Modüler Promosyon Yönetim Sistemi</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('promosyonlar')">📋 Promosyonlar</button>
            <button class="nav-tab" onclick="showTab('quiz')">🎯 Quiz</button>
            <button class="nav-tab" onclick="showTab('yonetim')">⚙️ Yönetim</button>
        </div>

        <div class="content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="accordion">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <span>📁 Promosyon Yöneticisi</span>
                        <span class="accordion-icon">▼</span>
                    </div>
                    <div class="accordion-content">
                        <div class="promo-manager-content">
                    <div class="promo-list" id="promo-list">
                        <!-- Promosyonlar buraya yüklenecek -->
                    </div>
                    <button class="add-button" onclick="showAddPromoForm()">➕ Yeni Promosyon Ekle</button>
                        </div>
                    </div>
                </div>

                <!-- H-Projesi Genel Bonus Kuralları Akordeonu -->
                <div class="accordion" style="margin-top: 20px;">
                    <div class="accordion-header" onclick="openGeneralRulesModal()">
                        <span>📜 H-Projesi Genel Bonus Kuralları</span>
                        <span class="accordion-icon">▶</span>
                    </div>
                </div>

                <div class="add-promo-section" id="add-promo-form" style="display: none;">
                    <h3>➕ Yeni Promosyon Ekle</h3>
                    <div class="form-group">
                        <label>Promosyon JSON Verisi:</label>
                        <textarea class="json-editor" id="promo-json" placeholder="JSON formatında promosyon verisi yapıştırın..."></textarea>
                    </div>
                    <button class="add-button" onclick="addPromoFromJSON()">Promosyon Ekle</button>
                    <button class="add-button" onclick="hideAddPromoForm()" style="background: #6c757d; margin-top: 10px;">İptal</button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Promosyonlar Tab -->
                <div id="promosyonlar" class="tab-content active">
                    <input type="text" class="search-box" placeholder="🔍 Promosyon ara..." onkeyup="searchPromos()">

                    <!-- Tüm Promosyonlar Çekmecesi -->
                    <div class="accordion" id="tum-promosyonlar-accordion" style="margin-bottom: 10px;">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>🎁 Tüm Promosyonlar</span>
                            <span class="accordion-icon">▼</span>
                        </div>
                        <div class="accordion-content">
                            <div id="promosyon-container">
                                <!-- Promosyonlar buraya yüklenecek -->
                            </div>
                        </div>
                    </div>

                    <!-- Sağlayıcı Bonusları Çekmecesi -->
                    <div class="accordion" id="saglayici-bonuslari-accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>🎁 Sağlayıcı Bonusları</span>
                            <span class="accordion-icon">▼</span>
                        </div>
                        <div class="accordion-content">
                            <div id="saglayici-promosyon-container">
                                <!-- Sağlayıcı promosyonları buraya yüklenecek -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quiz Tab -->
                <div id="quiz" class="tab-content">
                    <iframe src="quiz.html" frameborder="0" style="width: 100%; height: 600px; border: none; background-color: transparent;"></iframe>
                </div>

                <!-- Yönetim Tab -->
                <div id="yonetim" class="tab-content">
                    <div class="quiz-container">
                        <h3 style="margin-bottom: 20px; color: #333;">⚙️ Sistem Yönetimi</h3>
                        <p>Bu bölümde promosyon dosyalarını yönetebilirsiniz.</p>
                        <button class="add-button" onclick="refreshPromos()" style="background: #17a2b8;">🔄 Promosyonları Yenile</button>
                        <button class="add-button" onclick="exportPromos()" style="background: #6f42c1;">📤 Tüm Promosyonları Dışa Aktar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Genel Bonus Kuralları Modalı -->
    <div id="general-rules-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="modal-close-button" onclick="closeGeneralRulesModal()">×</span>
            <h3>GENEL PROMOSYON KURALLARI VE ŞARTLARI</h3>

            <h4>Promosyon Çevrim Kuralları</h4>
            <ul>
                <li>**Anapara Çevrimi**</li>
                <ol>
                    <li>Spor bahislerinde: Yatırım tutarı kadar tekli kuponlarda minimum 1.30 oran, kombine kuponlarda ise en az bir seçim minimum 1.30 oran olmak şartıyla bahis yapılmalıdır.</li>
                    <li>Casino oyunlarında: Yatırım tutarı kadar bahis alınmalıdır.</li>
                </ol>
                <li>**Çevrimsiz Yatırım Bonusu**</li>
                <ol>
                    <li>Spor bahislerinde: Anapara + bonus toplamı kadar;</li>
                    <li>Tekli kuponlarda minimum 1.50 oran</li>
                    <li>Kombine kuponlarda en az bir seçim minimum 1.50 oran olmalıdır.</li>
                    <li>Casino oyunlarında: Anapara + bonus toplamının 2 katı kadar bahis yapılmalıdır.</li>
                </ol>
                <li>**Çevrimli Spor Yatırım Bonusu**</li>
                <ol>
                    <li>Sadece kombine kuponlarda geçerlidir.</li>
                    <li>Her bir seçim minimum 1.90 oran olmalı ve toplamda (Yatırım + Bonus) x6 kadar bahis alınmalıdır.</li>
                    <li>Bonus çevrimi tamamlanmadan spor dışı alanlarda bahis yapılamaz.</li>
                </ol>
                <li>**Çevrimli Casino Yatırım Bonusu**</li>
                <ol>
                    <li>Casino ve canlı casino alanlarında, bonus tutarının 35 katı kadar bahis yapılmalıdır.</li>
                    <li>Bonus çevrimi tamamlanmadan farklı alanlarda bahis alınamaz.</li>
                </ol>
                <li>**Kayıp Bonusu**</li>
                <ol>
                    <li>Spor bahislerinde: Bonus miktarı kadar;</li>
                    <li>Tekli kuponlarda minimum 1.30 oran</li>
                    <li>Kombine kuponlarda en az bir seçim minimum 1.30 oran olmalıdır.</li>
                    <li>Casino oyunlarında: Bonus miktarı kadar bahis yapılmalıdır.</li>
                </ol>
                <li>**Spor Freebet**</li>
                <ol>
                    <li>Aksi belirtilmedikçe:</li>
                    <li>Minimum 4'lü kombine kuponlarda kullanılabilir.</li>
                    <li>Her seçim en az 1.60 oran olmalıdır.</li>
                </ol>
                <li>**Freespin**</li>
                <ol>
                    <li>Aksi belirtilmedikçe sadece geçerli oyunlarda kullanılabilir.</li>
                    <li>Çevrim şartı ve maksimum kazanç miktarı promosyon bazında değişebilir.</li>
                </ol>
                <li>**Turnuva Ödülleri**</li>
                <ol>
                    <li>Aksi belirtilmedikçe, çevrim şartı aktarılan tutar kadardır.</li>
                    <li>Ödüller Freebet veya Freespin şeklinde de verilebilir.</li>
                </ol>
            </ul>

            <h4>Genel Promosyon Kuralları</h4>
            <ul>
                <li>1-) Her yatırım için yalnızca bir bonus talep edilebilir. (Ertesi gün bonusu ve yatırım ek promosyonları hariç)</li>
                <li>2-) Bonus kullanımı sonrası çekim yapılabilmesi için çevrim şartlarının tamamlanması gerekir.</li>
                <li>3-) Aksi belirtilmedikçe promosyonlarda kazanç limiti yoktur.</li>
                <li>4-) Bonus alan üyeler, ilgili promosyonun tüm koşullarını kabul etmiş sayılır.</li>
                <li>5-) Bonuslar, tanımlandığı tarihten itibaren 7 gün içinde kullanılmalıdır. Kullanılmayan bonuslar silinir.</li>
                <li>6-) Yatırım bonusu, yalnızca yatırım sırasında talep edilmelidir. Manuel aktarım yapılmaz.</li>
                <li>7-) Aşağıdaki durumlar çevrime dahil edilmez:</li>
                <ol>
                    <li>Cash Out yapılan kuponlar</li>
                    <li>İade edilen bahisler</li>
                    <li>Aynı karşılaşmaya yapılan çoklu bahisler</li>
                    <li>Sistem kuponları</li>
                </ol>
                <li>8-) Casino oyunlarında 1'e 2 veya 1'e 3 oranlı ve katlamalı bahisler çevrime dahil edilmez.</li>
                <li>9-) Bu tür casino bahislerin kaybı için kayıp bonusu verilmez.</li>
                <li>10-) Kayıp bonusu için şartlar:</li>
                <ol>
                    <li>Öncesinde başka bonus alınmamış olması (ertesigün ve yatırım promosyonları hariç)</li>
                    <li>Bakiyenin tamamen sıfırlanmış olması</li>
                    <li>Bekleyen kupon olmaması</li>
                </ol>
                <li>11-) Bonuslar, 24 saatlik kar/zarar durumuna göre verilir.</li>
                <ol>
                    <li>24 saat içinde kâr eden üyeler bonus alamaz.</li>
                    <li>Sadece bonus alınmayan yatırımlar bu hesaplamaya dahildir.</li>
                </ol>
                <li>12-) Kayıp bonusu, yatırım saatinden itibaren en geç 24 saat içinde talep edilmelidir.</li>
                <li>13-) Oyunların çevrime katkı oranları:</li>
                <ol>
                    <li>Spor Bahisleri: %100</li>
                    <li>Slot: %100</li>
                    <li>Rulet: %1</li>
                    <li>Baccarat, Blackjack, Poker, Zar, Piyango ve diğer canlı oyunlar: %10</li>
                </ol>
                <li>14-) Aşağıdaki kurallar rulet oyunlarında geçerlidir.</li>
                <ol>
                    <li>XXXtreme Lightning Roulette (Evolution), Lightning Roulette (Evolution), Turkish Ligthning Roulette (Evolution), Blaze Roulette (Vivo), Auto Mega Roulette (Pragmatic Play Live), Mega Roulette (Pragmatic Play Live), Turkish Mega Roulette (Pragmatic Play Live), Immersive Roulette (Evolution), Fortune Roulette (Pragmatic Play Live), Roulette X500 (TvBet), Power Up Roulette (Pragmatic Play Live), Red Door Roulette (Evolution), Lucky 6 Roulette (Pragmatic Play Live), Gravity Roulette (Iconic21), Vegas Roulette 500x (Amusnet), Showtime Roulette (Amusnet), European Roulette (Amusnet), Ultimate Auto Roulette (Ezugi), Diamond Roulette (Microgaming), Dynamic Auto Roulette (Amusnet), Gold Wault (Evolution), Double Ball Roulette (Evolution), European Roulette Deluxe (Amusnet), Revolution Roulette (Ezugi) vb. Çarpanlı Oyunlarda bir turda maksimum 18 sayıya bahis alınabilir.</li>
                    <li>Diğer standart rulet oyunlarında maksimum sayı adedi 24'tür.</li>
                    <li>Renk, Tek/Çift, 1-18/19-36 gibi seçeneklere sadece 1 bahis yapılabilir.</li>
                    <li>Düzine ve Kolon seçeneklerine maksimum 2 bahis yapılabilir.</li>
                </ol>
                <li>15-) Bonus ve kazançların kötüye kullanımı durumunda Hproject, bunları iptal etme hakkına sahiptir.</li>
                <li>16-) Hileli bahislerde kayıp bonusu verilmez.</li>
                <li>17-) Tüm etkinlik ve turnuvalarda, ilgili promosyon kuralına ek olarak bu genel kurallar geçerlidir.</li>
                <li>18-) Hproject, promosyon kurallarını önceden haber vererek güncelleme hakkına sahiptir.</li>
                <li>19-) Bonus suistimali tespit edilen kullanıcıların bonus kullanımı geçici ya da kalıcı olarak sınırlandırılabilir.</li>
                <li>20-) Herhangi bir anlaşmazlık durumunda nihai karar yetkisi Hproject yönetimine aittir.</li>
                <li>21-) Aşağıdaki durumlar tespit edildiğinde bonus ödemesi yapılmaz:</li>
                <ol>
                    <li>Aynı ismi paylaşan hesaplar</li>
                    <li>Aynı Aileye / Eve ait hesaplar</li>
                    <li>Aynı IP'yi paylaşan hesaplar</li>
                    <li>Aynı kişisel bilgileri içeren hesaplar</li>
                    <li>Aynı cihazdan kullanılan hesaplar</li>
                    <li>Aynı kişiye ait olduğu tespit edilen birden fazla farklı isimli hesaplar</li>
                </ol>
            </ul>
        </div>
    </div>

    <script>
        let allRegularPromos = [];
        let allProviderPromos = [];
        let displayedRegularPromos = [];

        function showTab(tabId) {
            document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            const target = document.getElementById(tabId);
            if (target) target.classList.add('active');
            const btn = Array.from(document.querySelectorAll('.nav-tab')).find(b => b.getAttribute('onclick')?.includes(`'${tabId}'`));
            if (btn) btn.classList.add('active');
        }

        function toggleAccordion(headerEl) {
            headerEl.classList.toggle('active');
            const content = headerEl.nextElementSibling;
            if (!content) return;
            const isActive = content.classList.toggle('active');
            if (isActive) {
                content.style.maxHeight = content.scrollHeight + 'px';
            } else {
                content.style.maxHeight = '0px';
            }
        }

        function openGeneralRulesModal() {
            const modal = document.getElementById('general-rules-modal');
            if (modal) modal.style.display = 'flex';
        }

        function closeGeneralRulesModal() {
            const modal = document.getElementById('general-rules-modal');
            if (modal) modal.style.display = 'none';
        }

        function showAddPromoForm() {
            const form = document.getElementById('add-promo-form');
            if (form) form.style.display = 'block';
        }

        function hideAddPromoForm() {
            const form = document.getElementById('add-promo-form');
            if (form) form.style.display = 'none';
        }

        function createPromoCard(promo) {
            const card = document.createElement('div');
            card.className = 'promo-card';

            const title = document.createElement('div');
            title.className = 'promo-title';
            title.textContent = promo.title || promo.id || 'Promosyon';
            card.appendChild(title);

            if (promo.shortDesc) {
                const desc = document.createElement('div');
                desc.className = 'promo-description';
                desc.textContent = promo.shortDesc;
                card.appendChild(desc);
            }

            if (promo.basicInfo && typeof promo.basicInfo === 'object') {
                const features = document.createElement('div');
                features.className = 'promo-features';
                const list = document.createElement('ul');
                Object.entries(promo.basicInfo).forEach(([k, v]) => {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>${k}:</strong> ${v}`;
                    list.appendChild(li);
                });
                features.appendChild(list);
                card.appendChild(features);
            }

            return card;
        }

        function renderPromos() {
            const mainContainer = document.getElementById('promosyon-container');
            if (mainContainer) {
                mainContainer.innerHTML = '';
                displayedRegularPromos.forEach(p => mainContainer.appendChild(createPromoCard(p)));
            }

            const providerContainer = document.getElementById('saglayici-promosyon-container');
            if (providerContainer) {
                providerContainer.innerHTML = '';
                allProviderPromos.forEach(p => providerContainer.appendChild(createPromoCard(p)));
            }

            const listContainer = document.getElementById('promo-list');
            if (listContainer) {
                listContainer.innerHTML = '';
                [...displayedRegularPromos, ...allProviderPromos].forEach(p => {
                    const item = document.createElement('div');
                    item.className = 'promo-item';
                    const name = document.createElement('div');
                    name.textContent = p.title || p.id;
                    const controls = document.createElement('div');
                    controls.className = 'promo-controls';
                    const exportBtn = document.createElement('button');
                    exportBtn.className = 'control-btn toggle-btn';
                    exportBtn.textContent = 'Dışa Aktar';
                    exportBtn.onclick = () => downloadJSON(`${p.id || 'promo'}.json`, p);
                    controls.appendChild(exportBtn);
                    item.appendChild(name);
                    item.appendChild(controls);
                    listContainer.appendChild(item);
                });
            }
        }

        function searchPromos() {
            const input = document.querySelector('.search-box');
            const term = (input?.value || '').toLowerCase().trim();
            if (!term) {
                displayedRegularPromos = [...allRegularPromos];
            } else {
                displayedRegularPromos = allRegularPromos.filter(p => {
                    const haystack = [p.title, p.shortDesc]
                        .concat(Array.isArray(p.keywords) ? p.keywords : (typeof p.keywords === 'string' ? p.keywords.split(',') : []))
                        .filter(Boolean)
                        .join(' | ')
                        .toLowerCase();
                    return haystack.includes(term);
                });
            }
            renderPromos();
        }

        async function loadAllPromos() {
            const regularFiles = [
                'ertesi-gun.json','bonus-buy.json','hos-geldin.json','spor-freebet.json','casino-kayip-bonusu.json','freespin-600.json','cash-out.json','futbol-2-gol-onde-kazan.json','basketbol-20-sayi-onde-kazan.json','yeni-uyelere-deneme-bonusu.json','spor-kayip-bonusu.json','spor-hos-geldin-bonusu.json','blackjack-21-bonus.json'
            ];
            const providerFiles = ['pragmatic-play.json','kalamba-cash-drop.json','evoplay-big-adventures.json'];

            allRegularPromos = [];
            allProviderPromos = [];

            for (const f of regularFiles) {
                try {
                    const res = await fetch(`promosyonlar/${f}`);
                    if (res.ok) {
                        const data = await res.json();
                        if (data && data.id !== 'pragmatic-play' && data.id !== 'kalamba-cash-drop' && data.id !== 'evoplay-big-adventures') {
                            allRegularPromos.push(data);
                        }
                    }
                } catch (e) {
                    console.error('Regular promo load error:', f, e);
                }
            }

            for (const f of providerFiles) {
                try {
                    const res = await fetch(`promosyonlar/${f}`);
                    if (res.ok) {
                        const data = await res.json();
                        allProviderPromos.push(data);
                    }
                } catch (e) {
                    console.error('Provider promo load error:', f, e);
                }
            }

            displayedRegularPromos = [...allRegularPromos];
            renderPromos();
        }

        function refreshPromos() {
            loadAllPromos();
        }

        function downloadJSON(filename, data) {
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }

        function exportPromos() {
            const payload = { regular: allRegularPromos, provider: allProviderPromos };
            downloadJSON('tum-promosyonlar.json', payload);
        }

        function addPromoFromJSON() {
            const textarea = document.getElementById('promo-json');
            if (!textarea) return;
            try {
                const parsed = JSON.parse(textarea.value);
                if (!parsed || typeof parsed !== 'object') throw new Error('Geçersiz JSON');
                if (parsed.provider === true) {
                    allProviderPromos.push(parsed);
                } else {
                    allRegularPromos.push(parsed);
                    displayedRegularPromos = [...allRegularPromos];
                }
                textarea.value = '';
                hideAddPromoForm();
                renderPromos();
                alert('Promosyon eklendi. (Bu ekleme sadece tarayıcı oturumunda geçerlidir)');
            } catch (e) {
                alert('JSON parse hatası: ' + e.message);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadAllPromos();
        });
    </script>
</body>
</html>
